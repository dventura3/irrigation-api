@prefix vocab: <http://www.example.org/vocab#>.
@prefix st: <http://www.mystates.org/states#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix http: <http://www.w3.org/2011/http#>.
@prefix dbpedia: <http://dbpedia.org/resource/>.
@prefix iot: <https://iotdb.org/pub/iot#>.
@prefix iot-attribute: <https://iotdb.org/pub/iot-attribute#>.


{
  ?sensor a vocab:MoistureSensor;
          iot:uuid ?id.
  ?state a st:State;
          log:includes { ?sensor vocab:madeObservation ?obs. }.
}
=>
{
  _:request http:methodName "GET";
            http:requestURI ("/sensors/" ?id);
            http:resp [ http:body ?sensor ].

  ?sensor iot:name ?name;
          iot:description ?desc;
          vocab:madeObservation ?obs.

  ?obs iot:datetime ?timestamp;
       vocab:outputObservation ?result.

  ?result a dbpedia:Moisture;
        iot-attribute:humidity ?value.
}.