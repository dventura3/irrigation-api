@prefix : <http://www.example.org/01/ex#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix http: <http://www.w3.org/2011/http#>.


# GET a collection

{
  ?list a :Collection;
        :hasMember ?oneElem.
}
=>
{
  _:request http:methodName "GET";
            http:requestURI ?url;
            http:resp [ http:body ?list ].

  ?class a :ElementClass.
  ?oneElem a ?class;
          :hasId ?id.
}.



# POST a new element in a collection

{
  ?list a :Collection.

  ?class a :ElementClass.
  ?oneElem a ?class.
}
=>
{
  _:request http:methodName "POST";
            http:requestURI ?url;
            http:body ?oneElem;
            http:resp [ http:body ?oneElem ].

  ?list :hasMember ?oneElem.

  ?oneElem :hasId ?id.
}.



# GET of single element

{
  ?class a :ElementClass.
  ?elem a ?class;
        :hasId ?id.
}
=>
{
  _:request http:methodName "GET";
            http:requestURI (?url "/" ?id);
            http:resp [ http:body ?elem ].

  ?elem :hasAttribute ?x.
}.



# PUT of a single element ==== it is not clear! :(

{
  ?class a :ElementClass.
  ?elem a ?class;
        :hasId ?id;
        :hasAttribute ?x.

  ?newElem a ?class;
        :hasAttribute ?y.
}
=>
{
  _:request http:methodName "PUT";
            http:requestURI (?url "/" ?id);
            http:body ?newElem;
            http:resp [ http:body ?newElem ].

  ?newElem  :hasId ?id;
            :hasAttribute ?y.
}.
